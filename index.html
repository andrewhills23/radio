<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live Radio</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #b4cabe;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .radio-card {
            background: #fff;
            width: 380px;
            height: 140px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        /* Cover Art Area */
        .cover-art {
            width: 100px;
            height: 100px;
            background-color: #f0f0f0;
            border-radius: 12px;
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        /* Placeholder Icon (Music Note) */
        .cover-art svg {
            width: 40px;
            height: 40px;
            fill: #ccc;
            position: absolute;
            z-index: 1;
        }
        
        /* The Real Image */
        .cover-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2; /* sits on top of the icon */
            display: none; /* Hidden by default until JS activates it */
        }

        /* Info Area */
        .track-info {
            margin-left: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            overflow: hidden;
        }

        .live-badge {
            color: #ff3b30;
            font-weight: 900;
            font-size: 0.75rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background-color: #ff3b30;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.4; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }

        #track-title {
            font-weight: 700;
            font-size: 1.1rem;
            color: #222;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin: 0 0 4px 0;
            max-width: 200px;
        }

        #artist-name {
            font-size: 0.9rem;
            color: #666;
            margin: 0;
        }

        /* Play Button */
        .play-btn {
            background: #222;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.2s;
            margin-left: 10px;
            flex-shrink: 0;
        }

        .play-btn:hover {
            transform: scale(1.05);
            background: #000;
        }

        .play-btn svg {
            fill: #fff;
            width: 18px;
            height: 18px;
        }

        #icon-pause { display: none; }
        .playing #icon-play { display: none; }
        .playing #icon-pause { display: block; }

    </style>
</head>
<body>

<div class="radio-card">
    
    <div class="cover-art">
        <svg id="placeholder-icon" viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
        <img id="cover-img" src="" alt="Album Art">
    </div>

    <div class="track-info">
        <div class="live-badge"><div class="live-dot"></div> LIVE</div>
        <div id="track-title">Connecting...</div>
        <div id="artist-name">17 Months</div>
    </div>

    <button class="play-btn" id="play-btn">
        <svg id="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
        <svg id="icon-pause" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
    </button>
    
    <audio id="radio-player" preload="auto"></audio>
</div>

<script>
    // 1. PLAYLIST CONFIGURATION
    // IMPORTANT: Edit the 'cover' fields below with your actual image filenames.
    // Example: cover: "covers/my_cool_pic.jpg"
    
    const playlist = [
        { title: "Not A Virgin Anymore!",                   artist: "17 Months", cover: "covers/radio1.jpg", src: "audio/Not A Virgin Anymore!.mp3",                          duration: 186 },
        { title: "What Happens In Vegas, Stays In Vegas",   artist: "17 Months", cover: "covers/radio2.jpg", src: "audio/What Happens In Vegas, Stays In Vegas.mp3",          duration: 208 },
        { title: "Stefanie's Pregnant (Andy, What Did You Do?)", artist: "17 Months", cover: "covers/radio3.jpg", src: "audio/Stefanie's Pregnant (Andy, What Did You Do_).mp3", duration: 239 },
        { title: "Raven, Let's Get Married!",               artist: "17 Months", cover: "covers/radio4.jpg", src: "audio/Raven, Let's Get Married!.mp3",                      duration: 213 },
        { title: "We've Got Rupert",                        artist: "17 Months", cover: "covers/radio5.jpg", src: "audio/We've Got Rupert.mp3",                               duration: 180 },
        { title: "Jenkins, Is That Cocaine?",               artist: "17 Months", cover: "covers/radio6.jpg", src: "audio/Jenkins, Is That Cocaine_.mp3",                      duration: 162 },
        { title: "Thanksgiving Dinner",                     artist: "17 Months", cover: "covers/radio7.jpg", src: "audio/Thanksgiving Dinner.mp3",                            duration: 182 },
        { title: "Last Strike",                             artist: "17 Months", cover: "covers/radio8.jpg", src: "audio/Last Strike.mp3",                                    duration: 210 },
        { title: "Rupert Is Gay",                           artist: "17 Months", cover: "covers/radio9.jpg", src: "audio/Rupert Is Gay.mp3",                                  duration: 239 },
        { title: "The Death of Jenkins",                    artist: "17 Months", cover: "covers/radio10.jpg", src: "audio/The Death of Jenkins.mp3",                           duration: 234 },
        { title: "I Turned Into A Pterodactyl",             artist: "17 Months", cover: "covers/radio11.jpg", src: "audio/Pterodactyl Smoothie.mp3",                           duration: 165 },
        { title: "Addicted To The 'Pedia",                  artist: "17 Months", cover: "covers/radio12.jpg", src: "audio/Addicted To The 'Pedia.mp3",                         duration: 198 },
        { title: "It's Time To Leave",                      artist: "17 Months", cover: "covers/radio13.jpg", src: "audio/17 Months - It's Time To Leave.mp3",                 duration: 238 },
        { title: "I'm Not An Incel",                        artist: "17 Months", cover: "covers/radio14.jpg", src: "audio/17 Months - I'm Not An Incel.mp3",                   duration: 169 },
        { title: "I'd Leave My Parents' Basement For You",  artist: "17 Months", cover: "covers/radio15.jpg", src: "audio/17 Months - I'd Leave My Parents' Basement For You 2.mp3", duration: 221 },
        { title: "Perched",                                 artist: "The Chart of Consequences", cover: "covers/radio16.jpg", src: "audio/Perched.mp3",                                        duration: 43  },
        { title: "I Want To Go To Atlantis",                artist: "The Chart of Consequences", cover: "covers/radio17.jpg", src: "audio/I Want To Go To Atlantis.mp3",                       duration: 54  },
        { title: "Backshots In The Garage",                 artist: "ERM", cover: "covers/radio18.jpg", src: "audio/Backshots In The Garage.mp3",                        duration: 209 },
        { title: "Blaze and Glory",                         artist: "17 Months", cover: "covers/radio19.jpg", src: "audio/Blaze and Glory.mp3",                                duration: 166 },
        { title: "The Jenksquad Anthem",                    artist: "17 Months", cover: "covers/radio20.jpg", src: "audio/The Jenksquad Anthem.mp3",                           duration: 65  }
    ];

    const player = document.getElementById('radio-player');
    const trackTitle = document.getElementById('track-title');
    const artistName = document.getElementById('artist-name');
    const playBtn = document.getElementById('play-btn');
    const coverImg = document.getElementById('cover-img');

    const totalDuration = playlist.reduce((acc, track) => acc + track.duration, 0);

    function syncRadio() {
        const now = Math.floor(Date.now() / 1000); 
        let currentPosition = now % totalDuration;
        let timeAccumulator = 0;
        
        for (let track of playlist) {
            if (currentPosition < timeAccumulator + track.duration) {
                const seekTime = currentPosition - timeAccumulator;
                
                const rawSrc = player.getAttribute('src');
                const currentSrc = rawSrc ? decodeURIComponent(rawSrc.split('/').pop()) : "";
                const newSrc = decodeURIComponent(track.src.split('/').pop());

                if (currentSrc !== newSrc) {
                    player.src = track.src;
                    trackTitle.innerText = track.title;
                    artistName.innerText = track.artist;
                    
                    // HANDLE COVER ART
                    if (track.cover && track.cover !== "") {
                        coverImg.src = track.cover;
                        coverImg.style.display = 'block'; // Show image
                    } else {
                        coverImg.style.display = 'none'; // Hide image, show placeholder
                    }

                    player.load();
                    player.currentTime = seekTime;
                    
                    if(playBtn.classList.contains('playing')) {
                        player.play().catch(e => console.log("Playback prevented:", e));
                    }
                } else {
                    if (Math.abs(player.currentTime - seekTime) > 2) {
                        player.currentTime = seekTime;
                    }
                }
                return;
            }
            timeAccumulator += track.duration;
        }
    }

    setInterval(syncRadio, 1000);

    playBtn.addEventListener('click', () => {
        if (player.paused) {
            syncRadio();
            player.play();
            playBtn.classList.add('playing');
        } else {
            player.pause();
            playBtn.classList.remove('playing');
        }
    });

    syncRadio();
</script>

</body>
</html>
